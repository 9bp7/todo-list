!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n=(e,t,o,n,a,l)=>{let r=!1,d=null;const i=Date.now();return{setComplete:e=>{r=e,e&&(d=Date.now())},getComplete:()=>r,getCompletionDate:()=>d,getCreationDate:()=>i,setTitle:t=>e=t,setDescription:e=>t=e,setDueDate:e=>o=e,setPriority:e=>n=e,setNotes:e=>a=e,setChecklist:e=>l=e,getTitle:()=>e,getDescription:()=>t,getDueDate:()=>o,getPriority:()=>n,getNotes:()=>a,getChecklist:()=>l}},a=(e,t=!1)=>{let o=[];return{addTask:e=>o.push(e),getTask:e=>o[e],getTasks:()=>o,getTitle:()=>e,isFavourite:()=>t}},l=(()=>{let e=[];return{addProject:t=>e.push(t),deleteProject:t=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},getAllProjects:()=>e,getProject:t=>e[t],getProjectCount:()=>e.length,getProjectIndex:t=>e.indexOf(t)}})(),r=(()=>{let e=[];return{addModal:t=>(e.push(t),e.indexOf(t)),getModalIndex:t=>e.indexOf(t),hideAllOtherModals:t=>{for(let o=0;o<t.length;o++)o!==t?(e[o].hide(),console.log("hiding modalID: "+o)):console.log("keeping modalID: "+o)}}})(),d=e=>{let t=document.createElement("div");t.classList.add("modal"),t.dataset.modalid=r.addModal(t);const o=r.getModalIndex(t);let n=document.createElement("div");n.classList.add("modal-container"),n.dataset.modalid=o,document.querySelector("body").appendChild(n),document.querySelector(".modal-container").appendChild(t),e.length>0&&(t.innerHTML+=`<h3 id="modal-title">${e}</h3>`);const a=()=>{n.classList.remove("show"),t.classList.remove("show"),n.remove()};t.innerHTML+='<h3 id="modal-close">✕</h3>',n.addEventListener("click",e=>{(e.target.classList.contains("modal-container")||"modal-close"===e.target.id)&&a()});return{modal:t,show:()=>{n.classList.add("show"),t.classList.add("show"),document.querySelector("body").appendChild(n)},hide:a}},i=(()=>{document.querySelectorAll("button");let e=document.querySelector("aside"),t=document.querySelector(".sidebar-favourites"),o=document.querySelector(".sidebar-projects"),n=document.querySelector(".display-inner"),r=[],s=!1,c={type:"",projects:[]};const u=(e,t)=>{c.type=e,c.projects=t},m=()=>{n.innerHTML=""},p=e=>{let t=l.getProject(e);t.isFavourite()?n.innerHTML+=`<h3>${t.getTitle()}<button class="add-btn small-btn" data-btn="new-task" data-projectid=${e}>＋ Add Task</button></h3>`:n.innerHTML+=`<h3>${t.getTitle()}<button class="add-btn small-btn" data-btn="new-task" data-projectid=${e}>＋ Add Task</button><button class="add-btn delete-project-btn small-btn" data-btn="del-project" data-projectid=${e}>Delete Project</button></h3>`;let o=document.createElement("ul"),a=t.getTasks();a.sort((function(e,t){return e.getComplete()===t.getComplete()?0:e.getComplete()?1:-1}));for(let t=0;t<a.length;t++){let n=document.createElement("li");n.dataset.projectindex=t,n.dataset.projectid=e,a[t].getComplete()&&n.classList.add("todo-complete"),n.innerHTML+=`<input class="todo-tick" type="checkbox" ${a[t].getComplete()?"checked":""}><span class="todo-pri-${a[t].getPriority()}">${a[t].getTitle()}</span>`,a[t].getComplete()||(""!==a[t].getDescription()&&(n.innerHTML+=`<p class="todo-desc">${a[t].getDescription()}</p>`),""!==a[t].getDueDate()&&null!==a[t].getDueDate()&&(n.innerHTML+=`<p class="todo-desc">Due on ${a[t].getDueDate()}</p>`)),o.appendChild(n)}n.appendChild(o),y()},b=e=>{m(),u("one",[l.getProject(e)]),p(e),f(),j()},g=()=>{m(),u("all",l.getAllProjects());for(let e=0;e<l.getProjectCount();e++)p(e);f(),j()},f=()=>{n.querySelectorAll("li").forEach(e=>{e.childNodes.forEach(t=>{"INPUT"===t.tagName&&"checkbox"===t.type&&(-1===r.indexOf(t)?(r.push(t),t.addEventListener("CheckboxStateChange",()=>{console.log("toggling completion task id "+e.dataset.projectindex),l.getProject(e.dataset.projectid).getTask(e.dataset.projectindex).setComplete(t.checked),"all"===c.type?g():"one"===c.type&&b(l.getProjectIndex(c.projects[0]))})):console.log("event exists for "+e.textContent))})})},h=(document.querySelectorAll('button[data-btn="new-project"]').forEach(e=>{e.addEventListener("click",()=>{s=!s,y(!1),s&&(document.querySelector(".add-project-field").focus(),h())})}),()=>{let e=document.querySelector(".add-project-form"),t=document.querySelector(".add-project-field");e.addEventListener("submit",e=>{if(e.preventDefault(),""!==t.value){let e=a(t.value);l.addProject(e),s=!1,i.displayOneProject(l.getProjectIndex(e)),y()}})}),y=(n=!0)=>{t.innerHTML="",o.innerHTML="",(()=>{let e=l.getAllProjects(),n=document.querySelectorAll('button[data-btn="new-project"]'),a=0;e.forEach(e=>{e.isFavourite()?t.innerHTML+=`<li class="project-link" data-id=${a}>${e.getTitle()}</li>`:o.innerHTML+=`<li class="project-link" data-id=${a}>${e.getTitle()}</li>`,a++}),t.innerHTML+='<li class="project-link" data-id="all-tasks">All Tasks</li>',s?(n.forEach(e=>e.innerHTML="<span class='btn-symbol'>✕</span> Cancel"),o.innerHTML+='<div class="add-project"><form class="add-project-form"><input type="text" class="add-project-field" placeholder="Name your project"><input type="submit" class="add-project-submit" value="＋"></form></div>'):n.forEach(e=>e.innerHTML="<span class='btn-symbol'>＋</span> New Project")})(),(()=>{if("all"===c.type){t.querySelector('li[data-id="all-tasks"]').classList.add("selected")}else if("one"===c.type){let t=l.getProjectIndex(c.projects[0]);e.querySelector(`li[data-id="${t}"]`).classList.add("selected")}})(),e.querySelectorAll("li").forEach(e=>{e.addEventListener("click",()=>{"all-tasks"===e.dataset.id?i.displayAllProjects():i.displayOneProject(+e.dataset.id),s=!1,y()})})},j=()=>{n.querySelectorAll('button[data-btn="del-project"]').forEach(e=>{e.addEventListener("click",()=>{let t=l.getProject(+e.dataset.projectid);((e,t,o,n,a,l,r=!1)=>{const i=d(e);t.length>0&&(i.modal.innerHTML+=`<p>${t}</p>`),r?(i.modal.innerHTML+=`<button data-modalbtn="confirm" class="modal-btn modal-confirm-btn-warn">${a}</button>`,i.modal.innerHTML+=`<button data-modalbtn="cancel" class="modal-btn modal-cancel-btn-warn">${l}</button>`):(i.modal.innerHTML+=`<button data-modalbtn="confirm" class="modal-btn modal-confirm-btn">${a}</button>`,i.modal.innerHTML+=`<button data-modalbtn="cancel" class="modal-btn modal-cancel-btn">${l}</button>`);(()=>{let e=i.modal.querySelector('button[data-modalbtn="confirm"]'),t=i.modal.querySelector('button[data-modalbtn="cancel"]');e.addEventListener("click",()=>{o(),i.hide()}),t.addEventListener("click",()=>{null!==n&&n(),i.hide()})})();return Object.assign({},i,{})})("Delete "+t.getTitle(),`Do you really wish to permanently delete your project '${t.getTitle()}'?`,()=>(e=>{l.deleteProject(e),g(),y()})(t),null,"Delete Project","Cancel",!0).show()})})};return{displayOneProject:b,displayAllProjects:g}})();let s=a("Inbox",!0);l.addProject(s);let c=n("This is complete first","More info about this amazing thing","2020-09-19","high",null,null);c.setComplete("true"),s.addTask(c);let u=n("Do something amazing","More info about this amazing thing","2020-09-19","low",null,null);s.addTask(u);let m=n("This is complete","More info about this amazing thing","2020-09-19","high",null,null);m.setComplete("true"),s.addTask(m);let p=n("Do another great thing","More info about this amazing thing","2020-09-19","med",null,null);s.addTask(p);let b=n("Do another great thing","More info about this amazing thing","2020-09-19","med",null,null);s.addTask(b);let g=((e,t,o,n,a)=>{const l=d(e);let r='<form autocomplete="off">';r+=`<input type="submit" data-modalbtn="submit" class="modal-btn modal-confirm-btn" value="${n}">`,a.length>0&&(r+=`<button data-modalbtn="cancel" class="modal-btn modal-cancel-btn">${a}</button>`),r+="</form>",l.modal.innerHTML+=r;const i=()=>{let e=l.modal.querySelector("form");if(e&&(console.log("form exists"),e.addEventListener("submit",o=>{console.log("submitted form"),o.preventDefault();let n=new FormData(e);t(n)})),a.length>0){l.modal.querySelector('button[data-modalbtn="cancel"]').addEventListener("click",()=>{null!==o&&o(),l.hide()})}};return i(),Object.assign({},l,{show:()=>{l.show(),l.modal.querySelector("input").focus()},addFormHTML:e=>{let t=l.modal.querySelector("form");t.innerHTML=e+t.innerHTML,i()},addErrorLabel:(e,t)=>{let o=l.modal.querySelector("form");if(!o.querySelector(`p[data-error="${t}"]`)){let n=o.querySelector("#"+t),a=document.createElement("p");a.classList.add("modal-error"),a.dataset.error=t,a.textContent=e,o.insertBefore(a,n.nextSibling)}},removeErrorLabel:e=>{let t=l.modal.querySelector(`p[data-error="${e}"]`);t&&t.remove()}})})("New Task",(function(e){for(let t of e.entries())console.log(t[0]+": "+t[1]),"modifytask-name"===t[0]&&(0===t[1].length?g.addErrorLabel("You need to enter a task name!",t[0]):g.removeErrorLabel(t[0]))}),null,"Add Task","Cancel");g.addFormHTML('<input type="text" id="modifytask-name" name="modifytask-name" placeholder="Task name" tabindex="0">\n    <input type="text" id="modifytask-desc" name="modifytask-desc" placeholder="Description"> \n    <label for="modifytask-duedate">Due date (optional):</label>   \n    <input type="date" id="modifytask-duedate" name="modifytask-duedate">\n    <label for="modifytask-duedate">Priority:</label>   \n    <select id="modifytask-priority" name="modifytask-priority">\n      <option value="low">Low</option>\n      <option value="med">Medium</option>\n      <option value="high">High</option>\n    </select>\n    <textarea id="modifytask-notes" name="modifytask-notes" rows="3" placeholder="Add additional notes here"></textarea>'),g.show(),s=a("Personal"),l.addProject(s),s=a("Work"),l.addProject(s),i.displayAllProjects()}]);